"use strict";!function(t,e){if(!("customElements"in t))return;const n=()=>t.yt?.config_||t.ytcfg?.data_,o=()=>n()?.LOGGED_IN;if(!o())return;const i="https://www.youtube.com",r="ACTION_ADD_VIDEO",a="ACTION_REMOVE_VIDEO_BY_VIDEO_ID",c=-1!==navigator.userAgent.indexOf("Firefox"),s=-1!==navigator.userAgent.indexOf("Edg/"),d=t=>t.toString(36),l=d(Date.now()),p="msfy",u=p+"-inner-message",f=p+"-outer-message",h=p+"-trusted-type-policy",y=p+"-playlist-names-toggle-button-"+l,b=p+"-playlist-name",m=b+"-selected",$=p+"-toggle-bar-button-"+l,x=p+"-donate-button-"+l,g=p+"-donate-icon-"+l,v=p+"-wrapper-"+l,_=p+"-dialog-"+l,w='.ytd-page-manager[role="main"]',k=p+"-popup-menu",E=k+"-item",T=p+"-video-checkbox",A=`#${T}.${T}`,z=`${w} :not([is-hidden]):not([hidden]) > ${v} > ${A}`,I=`${z}[checked]`,O="cyan",D="rgba(0, 0, 0, 0.5)",L="12px",M=p+"-toast",S=p+"-splitter",N=p+"-progress-bar",C=N+"-close",V="application/json",P="text/html",R="text/plain",H=[V,R,P],j="center",F="disabled",U="dragging",J="position",Y="shorts",B="animationend",q="change",W="click",G="contextmenu",Q="focus",X="input",Z="keydown",K="mousedown",tt="mousemove",et="mouseup",nt="resize",ot="storage",it="tap",rt="transitionrun",at="yt-action",ct="yt-navigate-finish",st="yt-navigate-start",dt="yt-popup-closed",lt="yt-service-request-completed",pt="yt-service-request-error",ut="yt-service-request-sent",ft={preserveSelection:!1,sortPlaylistNames:!1,showPlaylistNames:!1,noRemovalConfirmation:!1,outlineIcon:!1,callout:0,handle:null,collapsed:!1,findDuplicatesBackwards:!1,customMenuWidth:!1,menuWidth:240,positioning:j,barPosition:{x:0,y:t.innerHeight-72},filterPosition:{x:0,y:1},filter:{title:{value:"",option:!1},channel:{value:"",option:!1},watched:{value:"100",option:!1},duration:{value:"00:00:00",option:!1}}};let ht,yt,bt,mt,$t,xt,gt,vt,_t,wt,kt,Et,Tt,At,zt,It,Ot=!1,Dt=!1,Lt=!1,Mt=!1,St=!1,Nt=!1,Ct=!1,Vt=!1,Pt=!1,Rt=!1;const Ht="undefined"!=typeof trustedTypes?trustedTypes.createPolicy(h,{createHTML:t=>t}):{createHTML:t=>t},jt=p+"Data";let Ft;const Ut=t=>Array.isArray(t)&&t.every((t=>"string"==typeof t&&11===t.length)),Jt=()=>Ut(Ft)?Ft.length:0,Yt=()=>Jt()>0,Bt=e=>{try{t.localStorage.setItem(jt,JSON.stringify({videos:e}))}catch(t){}},qt=()=>{try{return JSON.parse(t.localStorage.getItem(jt)).videos}catch(t){return[]}},Wt=()=>{if(!c)try{navigator.clipboard.readText().then((t=>{if(/^\s*\[(\s*\"[\w-]{11}\"\s*,\s*)*(\s*\"[\w-]{11}\"\s*,?\s*\])\s*$/.test(t)){const o=JSON.parse(t);Ut(o)&&(Ut(Ft)&&(n=Ft,(e=o).length===n.length&&e.toString()===n.toString())||(Ft=o,Bt(o)))}var e,n}))}catch(t){}};function Gt(t){t.key===jt&&(Ft=qt())}function Qt(t){Wt()}function Xt(t){Ut(t)&&(Ft=t,(t=>{try{navigator.clipboard.writeText(JSON.stringify(t))}catch(t){}})(t),Bt(t))}const Zt=()=>e.querySelector(w+'[page-subtype="playlist"]'),Kt=t=>t?.contents?.twoColumnBrowseResultsRenderer?.tabs?.[0]?.tabRenderer?.content,te=t=>Kt(t)?.sectionListRenderer?.contents?.[0]?.itemSectionRenderer?.contents?.[0],ee=t=>te(t)?.playlistVideoListRenderer,ne=()=>e.querySelectorAll(z),oe=()=>e.querySelectorAll(I),ie=()=>e.querySelector(I),re=t=>t?.parentElement?.parentElement;function ae(t){const e=re(t)?.data;if(e)return e.setVideoId||e.content?.shortsLockupViewModel?.menuOnTap?.innertubeCommand?.showSheetCommand?.panelLoadingStrategy?.inlineContent?.sheetViewModel?.content?.listViewModel?.listItems?.[3]?.listItemViewModel?.rendererContext?.commandContext?.onTap?.innertubeCommand?.playlistEditEndpoint?.actions?.[0]?.setVideoId}const ce=()=>ae(gt),se=()=>!!ie(),de=()=>[...e.querySelectorAll('input:not([type="hidden"]):not([type="checkbox"]), textarea')].some((t=>t.contains(e.activeElement))),le=()=>gt=vt=void 0;function pe(t){return vt=gt,t?.focus(),gt=e.activeElement,gt}const ue=t=>t.replace(/[\/|\\:*?"<>]/g,"");function fe(t){const e=t?.data;if(e)return e.videoId||e.content?.videoRenderer?.videoId||e.content?.radioRenderer?.navigationEndpoint?.watchEndpoint?.videoId||e.content?.playlistRenderer?.navigationEndpoint?.watchEndpoint?.videoId||e.content?.shortsLockupViewModel?.onTap?.innertubeCommand?.reelWatchEndpoint?.videoId||e.content?.lockupViewModel?.rendererContext?.commandContext?.onTap?.innertubeCommand?.watchEndpoint?.videoId||e.command?.reelWatchEndpoint?.videoId||e.content?.shortsLockupViewModel?.menuOnTap?.innertubeCommand?.showSheetCommand?.panelLoadingStrategy?.inlineContent?.sheetViewModel?.content?.listViewModel?.listItems?.[3]?.listItemViewModel?.rendererContext?.commandContext?.onTap?.innertubeCommand?.playlistEditEndpoint?.actions?.[0]?.videoId}function he(t){const e=t?.data;if(e)return e.headline?.simpleText||e.title?.simpleText||e.title?.runs?.[0]?.text||e.content?.videoRenderer?.title?.runs?.[0]?.text||e.content?.shortsLockupViewModel?.overlayMetadata?.primaryText?.content||e.content?.playlistRenderer?.videos?.[0]?.childVideoRenderer?.title?.simpleText||e.content?.radioRenderer?.title?.simpleText||e.reelPlayerOverlayRenderer?.reelPlayerHeaderSupportedRenderers?.reelPlayerHeaderRenderer?.reelTitleText?.runs?.[0]?.text||e.content?.lockupViewModel?.metadata?.lockupMetadataViewModel?.title?.content}function ye(t){const e=t?.data;if(e)return(e.content?.videoRenderer?.owner?.title||"")+(e.content?.videoRenderer?.owner?.navigationEndpoint?.browseEndpoint?.canonicalBaseUrl||"")||(e.shortBylineText?.runs?.[0]?.text||"")+(e.shortBylineText?.runs?.[0]?.navigationEndpoint?.browseEndpoint?.canonicalBaseUrl||"")}const be=t=>"string"==typeof t,me=([...t]=oe())=>t.map((t=>fe(re(t)))).filter(be),$e=([...t]=oe())=>t.map(ae).filter(be),xe=se,ge=()=>Yt()&&!Mt&&!Ct&&Rt,ve=t=>t.shiftKey&&!t.ctrlKey&&!t.altKey,_e=(t,e)=>`<yt-icon-button id="${t}"><yt-icon icon="${e}"></yt-icon></yt-icon-button>`,we=(t,e)=>`<tp-yt-paper-tooltip for="${t}" position="top">${e}</tp-yt-paper-tooltip>`,ke=(t=!1,e=24)=>{const n=Ot?"red":t?"currentColor":"#065fd4";return`<svg viewBox="0 0 24 24" style="width: ${e}px; height: ${e}px">${`<path d="M2,4H0v18c0,1.1 0.9,2 2,2H20V22H2Z" fill="${n}"/>`}${t?`<path d="M22,18H6V2H22M22,0H6C4.9,0 4,0.9 4,2v16c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2V2C24,0.9 23.1,0 22,0Z" fill="${n}"/>`:`<path d="M22,0H6C4.9,0 4,0.9 4,2v16c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2V2C24,0.9 23.1,0 22,0Z" fill="${n}"/>`}${`<path d="M12,11 9,8 7,10 12,15 21,6 19,4Z" fill="${t?"currentColor":"#ffffff"}"/>`}</svg>`},Ee=t=>(t.preventDefault(),t.stopPropagation()),Te=(e,n=u,o=t)=>o.dispatchEvent(new CustomEvent(n,e)),Ae=(t,e)=>Te({detail:JSON.stringify({type:t,value:e})});async function ze(){const t=Math.floor(Date.now()/1e3),n=function(t,e){const n={};if("string"==typeof t&&t){const o=t.split(e);if(o.length)for(const t of o){const e=t.indexOf("=");e>0&&(n[t.substring(0,e)]=t.substring(e+1))}}return n}(e.cookie,"; ");return"SAPISIDHASH "+t+"_"+await async function(t,e){const n=(new TextEncoder).encode(e),o=await crypto.subtle.digest(t,n);return Array.from(new Uint8Array(o)).map((t=>("00"+t.toString(16)).slice(-2))).join("")}("SHA-1",t+" "+n.SAPISID+" "+i)}async function Ie(t,e,o){try{const i=function(t,e,o){const i=n();if(i){const{clientName:n,clientVersion:r,gl:a,hl:c}=i.INNERTUBE_CONTEXT.client;e.context={client:{clientName:n,clientVersion:r,gl:a,hl:c}};const s={"cache-control":"no-cache"};o&&(s.authorization=o,e.context.user={onBehalfOfUser:i.DELEGATED_SESSION_ID});const d={method:"POST",body:JSON.stringify(e),headers:s},l=`?key=${i.INNERTUBE_API_KEY}`;return new Request(`/youtubei/v1/${t}${l}`,d)}}(t,e,o);if(i){const t=await fetch(i);return await t.json()}}catch(t){console.error(ht.extensionName,"sendRequest",t.message,{error:t})}}function Oe(t,n){e.querySelectorAll(t).forEach((t=>t.checked=n))}function De(){Oe(z,!0),In.t()}function Le(){Oe(A,!1),In.t()}function Me(t,e){for(const n of e){if(!t.hasOwnProperty(n))return;t=t[n]}return t}function Se(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++){const o=Me(t[n],e);if(o)return o}}function Ne(t,n){return new Promise((o=>{let i=e.querySelector(t);if(i)o(i);else{const r=n&&e.querySelector(n)||e.documentElement;let a=new MutationObserver((()=>{i=r.querySelector(t),i&&(a.disconnect(),a=null,o(i))}));a.observe(r,{childList:!0,subtree:!0})}}))}location;const Ce=e.querySelector("ytd-app"),Ve=t=>t?.endpointHandlerActionMap?.["yt-service-request"],Pe=Ve(Ce?.ytEndpointBehavior)||Ve(Ce?.ytActionHandlerBehavior)||Ve(Ce?.ytActionRouterBehavior)||Ve(Ce?.ytComponentBehavior)||Ve(Ce?.ytdAppBehavior)||Ve(Ce?.ytRendererBehavior),Re=t=>Pe(Ce,t).ajaxPromise,He=(t,e=Ce)=>e.resolveCommand(t);function je(t,e,n,o="setVideoId"){const i={webCommandMetadata:{sendPost:!0,apiUrl:"/youtubei/v1/browse/edit_playlist"}},r={playlistId:e,actions:n.map((e=>({[o]:e,action:t})))};return"addedVideoId"!==o&&(r.params="CAFAAQ%3D%3D"),{commandMetadata:i,playlistEditEndpoint:r}}function Fe(t){const e="/playlist?list="+t,n={endpoint:{commandMetadata:{webCommandMetadata:{url:e,rootVe:5754,webPageType:"WEB_PAGE_TYPE_PLAYLIST",apiUrl:"/youtubei/v1/browse"}},browseEndpoint:{browseId:"VL"+t}},pageType:"playlist",url:e,reload:!1};Ce.onYtNavigate({detail:n})}function Ue(t){Je(Kt(t)?.richGridRenderer?.contents),Ye(t)}function Je(t){_t=t?.map((t=>({id:t.richItemRenderer?.content?.lockupViewModel?.contentId,title:t.richItemRenderer?.content?.lockupViewModel?.metadata?.lockupMetadataViewModel?.title?.content})))}function Ye(t){const n=Kt(t)?.richGridRenderer?.header?.chipBarViewModel?.chips?.[0]?.chipViewModel,o=n?.tapCommand?.innertubeCommand?.showSheetCommand?.panelLoadingStrategy?.inlineContent?.sheetViewModel?.content?.listViewModel?.listItems;wt=e.querySelector("#header > chip-bar-view-model > div > chip-view-model > div > button > div")?.textContent||n?.text,kt=o?.map((t=>t.listItemViewModel?.title?.content)),Et=kt?.findIndex((t=>t===wt))}function Be(t=It,e){if(ft.showPlaylistNames&&_t&&Tt&&(1===Et||e)){const n=_t.findIndex((e=>e.id===t));if(-1!==n){const t=_t.splice(n,1)[0],o=Tt.children,i=o[n];if(e&&(i.innerText=t.title=e),1===Et)_t.unshift(t),Tt.insertBefore(i,Tt.firstElementChild);else{const r=_t.findIndex((t=>t.title.localeCompare(e)>0));-1!==r&&(_t.splice(r,0,t),Tt.insertBefore(i,n>r?o[r]:o[r].nextElementSibling))}}}}let qe,We;function Ge(t=e.querySelector("#"+N),n,o){if(!t){(t=e.createElement("div")).id=N;const n=`<header><span></span>${_e(C,"close")}</header>`;t.innerHTML=Ht.createHTML(`${n}<div></div>`),t.querySelector("#"+C).addEventListener(it,(()=>{We=!0,t.style.animation="",t.style.display="none"})),e.body.appendChild(t)}const i=Math.min(100,Math.round(100*o))+"%";return t.firstElementChild.firstElementChild.textContent=n,t.lastElementChild.style.width=i,t.lastElementChild.textContent=i,t.style.display="",t}function Qe(t){t&&(t.style.animation="",t.style.display="none"),qe=!1,We=!1}function Xe(t){if(!t||We)Qe(t);else if(!t.style.animation){function e(){t.removeEventListener(B,e,!0),Qe(t)}t.addEventListener(B,e,!0),t.style.animation=`3s ${N}-fade-out forwards`}}const Ze=t=>t?.[t.length-1]?.continuationItemRenderer?.continuationEndpoint,Ke=t=>Ze(t)?.continuationCommand?.token,tn=t=>t?.sidebar?.playlistSidebarRenderer?.items,en=t=>tn(t)?.[0]?.playlistSidebarPrimaryInfoRenderer,nn=()=>!Ze(ee(Zt()?.data)?.contents),on=t=>{const e=en(t)?.stats?.[0]?.runs;if(Array.isArray(e))for(const t of e){const e=parseInt(t.text?.replace(/[., ]/g,""));if(!isNaN(e))return e}return 0};async function rn(){Date.now();let t;try{const e=Zt()?.data,n=on(e);if(n){const o=ee(e);let i=o?.contents;const r=ht.loadingEntirePlaylist,a=location.href;let c,s=0;for(qe=!0;!We&&location.href===a&&(c=Ze(i));){s+=i.length-1,t=Ge(t,r,s/n);const e=await Re(c);i=e?.actions?.[0]?.appendContinuationItemsAction?.continuationItems}t&&!We&&Ge(t,r,1)}Date.now()}catch(t){console.error(ht.extensionName,"loadPlaylist",t.message,{error:t})}finally{Xe(t)}}const an=(t,e,n)=>void 0!==n&&(t[e]=n);function cn(t){if(t){const e={};return an(e,"name",t.text),an(e,"id",t.navigationEndpoint?.browseEndpoint?.browseId),an(e,"url",t.navigationEndpoint?.commandMetadata?.webCommandMetadata?.url),e}}function sn(t,e){const n=t?.metadata?.playlistMetadataRenderer,o="boolean"!=typeof e?.isEditable||e?.isEditable,i="boolean"!=typeof e?.canReorder||e?.canReorder,r={id:It,title:n?.title,description:n?.description||"",numVideos:on(t),isEditable:o,canReorder:i};return an(r,"channel",cn((t=>tn(t)?.[1]?.playlistSidebarSecondaryInfoRenderer)(t)?.videoOwner?.videoOwnerRenderer?.title?.runs?.[0])),an(r,"privacy",function(t){const e=en(t)?.privacyForm?.dropdownFormFieldRenderer?.dropdown?.dropdownRenderer?.entries;if(e){const t=e.find((t=>t.privacyDropdownItemRenderer?.isSelected));if(t){const e=t.privacyDropdownItemRenderer;return{value:e.int32Value,type:e.icon?.iconType.toLowerCase().replace("privacy_",""),icon:e.icon?.iconType,text:e.label?.simpleText}}}}(t)),r}const dn=t=>t?.onResponseReceivedActions?.[0]?.appendContinuationItemsAction?.continuationItems;function ln(t,e){if(e)for(const n of e){const e={};let o=n.playlistVideoRenderer;if(o)an(e,"id",o.videoId),an(e,"setVideoId",o.setVideoId),an(e,"title",o.title?.simpleText),an(e,"titleLong",o.title?.accessibility?.accessibilityData?.label),an(e,"time",parseInt(o.lengthSeconds)),an(e,"timeShort",o.lengthText?.simpleText),an(e,"timeLong",o.lengthText?.accessibility?.accessibilityData?.label),an(e,"thumbnails",o.thumbnail?.thumbnails),an(e,"channel",cn(o.shortBylineText?.runs?.[0])),t.push(e);else if(o=n.richItemRenderer){const n=o.content?.shortsLockupViewModel;an(e,"id",n?.onTap?.innertubeCommand?.reelWatchEndpoint?.videoId),an(e,"title",n?.overlayMetadata?.primaryText?.content),an(e,"thumbnails",n?.thumbnail?.sources),t.push(e)}else(o=n.videoRenderer)&&(an(e,"id",o.videoId),an(e,"title",o.title?.runs?.[0]?.text),an(e,"timeShort",o.lengthText?.simpleText),an(e,"thumbnails",o.thumbnail?.thumbnails),an(e,"channel",cn(o.shortBylineText?.runs?.[0])),t.push(e))}}function pn(t,e){if(e)for(const n of e){const e=n.itemSectionRenderer;if(e){const n=[];if(ln(n,e?.contents),n.length){const o=e?.header?.itemSectionHeaderRenderer?.title,i=o?.runs?.[0]?.text||o?.simpleText;t.push({title:i,videos:n})}}}}function un(n){const o=new Blob([n],{type:V}),i=URL.createObjectURL(o),r=e.createElement("a");r.href=i,r.download=p+"_export_playlist_"+ue(zt),e.body.appendChild(r),r.click(),setTimeout((()=>r.remove()),t.URL.revokeObjectURL(i))}async function fn(t=It,e=!0){if(t){qe=!0;Date.now();let o;try{const i=e&&await ze();let r=await Ie("browse",{browseId:"VL"+t},i);const a=ee(r)||(n=r,te(n)?.richGridRenderer),c=sn(r,a),s=[];let d=a?.contents;ln(s,d);const l=ht.exportingPlaylist;let p;for(;!We&&(p=Ke(d));)o=Ge(o,l,s.length/c.numVideos),r=await Ie("browse",{continuation:p},i),d=dn(r),ln(s,d);o&&!We&&Ge(o,l,1),c.videos=s,We||un(JSON.stringify(c,null,2)),Date.now()}catch(t){console.error(ht.extensionName,"downloadPlaylist",t.message,{error:t})}finally{Xe(o)}}var n}async function hn(){qe=!0;Date.now();let t;try{const e=await ze();let n=await Ie("browse",{browseId:"FEhistory"},e),o=Kt(n)?.sectionListRenderer?.contents;if(o){const i=n.header?.pageHeaderRenderer?.pageTitle||"History",r=[];pn(r,o);const a=ht.exportingHistory;let c,s=100;for(;!We&&(c=Ke(o));)r.length>s&&(s*=10),t=Ge(t,a,r.length/s),n=await Ie("browse",{continuation:c},e),o=dn(n),pn(r,o);if(t&&!We&&Ge(t,a,1),!We){const t={title:i,sections:r};un(JSON.stringify(t,null,2)),Date.now()}}}catch(t){console.error(ht.extensionName,"downloadHistory",t.message,{error:t})}finally{Xe(t)}}const yn=p+"-select-filter",bn=yn+"-close";let mn,$n;function xn(){if($n&&($n(),$n=null),mn){const t=ft.positioning;mn.getAttribute(J)!==t&&(mn.setAttribute(J,t),"custom"===t&&($n=$o(mn,"filterPosition")))}}function gn(){wn.o(),mn&&(mn.remove(),mn=null),In.t()}function vn(){if(!mn){mn=e.createElement("div"),mn.id=yn;const n=yn+"-help",o=_e(bn,"close")+we(bn,ht.close),i=_e(n,`${p}:${p}-help`)+we(n,ht.filterHelpTooltip),r=_e("done","icons:done"),a=`<header><yt-icon icon="icons:filter-list"></yt-icon>${`<span id="title">${ht.selectWithFilter}</span>`}${i}${o}</header>`,c=`<input type="radio" name="source" value="title" id="source-title" checked><label for="source-title">${ht.title}</label>`,s=`<input type="radio" name="source" value="channel" id="source-channel"><label for="source-channel">${ht.channelName}</label>`,d=`<input type="radio" name="source" value="watched" id="source-watched"><label for="source-watched">${ht.watched}</label>`,l='<input type="radio" name="source" value="duration" id="source-duration"><label for="source-duration">Dauer</label>',u=`<section><input><output style="display: none; width: 3em; text-align: right;"><span></span> %</output>${r}</section>`,f=yn+"-case-sensitive",h=`<footer>${`<div><input type="checkbox" id="${f}"><label for="${f}">${ht.caseSensitive}</label></div>`}</footer>`;mn.innerHTML=Ht.createHTML(`<div id="drag-handle"><hr><hr></div><div id="content">${a}<div id="choice">${c}${s}${d}${l}</div>${u}${h}</div>`);const y=encodeURI("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions/Cheatsheet");mn.querySelector("#content > header > #"+n).addEventListener(it,(()=>t.open(y,"_blank"))),mn.querySelector("#"+bn).addEventListener(it,gn);let b=ft.filter.title;const m=mn.querySelector("section > input");m.style.width="80%";const $=m.nextElementSibling;m.addEventListener(X,(t=>{b.value=m.value,"range"===m.type&&($.firstElementChild.innerHTML=Ht.createHTML(b.value))}));const x=mn.querySelector(`#${f}`);x.checked=b.option,x.addEventListener(q,(t=>{b.option=x.checked})),mn.querySelector("#source-title").addEventListener(q,(t=>{b=ft.filter.title,m.style.width="80%",m.removeAttribute("type"),m.removeAttribute("min"),m.removeAttribute("max"),m.removeAttribute("step"),m.value=b.value,m.focus(),$.style.display="none",x.checked=b.option,x.nextElementSibling.textContent=ht.caseSensitive})),mn.querySelector("#source-channel").addEventListener(q,(t=>{b=ft.filter.channel,m.style.width="80%",m.removeAttribute("type"),m.removeAttribute("min"),m.removeAttribute("max"),m.removeAttribute("step"),m.value=b.value,m.focus(),$.style.display="none",x.checked=b.option,x.nextElementSibling.textContent=ht.caseSensitive})),mn.querySelector("#source-watched").addEventListener(q,(t=>{b=ft.filter.watched,m.style.width="70%",m.removeAttribute("step"),m.setAttribute("type","range"),m.setAttribute("min","0"),m.setAttribute("max","100"),m.value=b.value,m.focus(),$.style.display="block",$.firstElementChild.innerHTML=Ht.createHTML(b.value),x.checked=b.option,x.nextElementSibling.textContent=ht.invertFilter})),mn.querySelector("#source-duration").addEventListener(q,(t=>{b=ft.filter.duration,m.style.width="80%",m.removeAttribute("min"),m.removeAttribute("max"),m.setAttribute("type","time"),m.setAttribute("step","1"),m.value=b.value,m.focus(),$.style.display="none",x.checked=b.option,x.nextElementSibling.textContent=ht.invertFilter}));const g=()=>mn.querySelector('input[name="source"]:checked').value,v=()=>function(t,e,n){if(t)try{const o="watched"===n?t:"duration"===n?_n(t):new RegExp(t,e?"i":""),i=ne();for(let t=0;t<i.length;t++){const r=i[t],a=re(r),c=a.data;if(c)switch(n){case"title":o.test(he(a))&&(r.checked=!0);break;case"channel":o.test(ye(a))&&(r.checked=!0);break;case"watched":{const t=c.thumbnailOverlays||c.content?.videoRenderer?.thumbnailOverlays,n=t?.find((t=>t.thumbnailOverlayResumePlaybackRenderer)),i=n?.thumbnailOverlayResumePlaybackRenderer?.percentDurationWatched||0;(e?i>=o:i<=o)&&(r.checked=!0)}break;case"duration":{const t=c.content?.videoRenderer||c,n=_n(t.lengthSeconds||t.lengthText?.simpleText||t.thumbnailOverlays?.[0]?.thumbnailOverlayTimeStatusRenderer?.text?.simpleText)||a.hasAttribute("is-short")&&60;n&&(e?n>=o:n<=o)&&(r.checked=!0)}}}In.t()}catch(t){t.message,xo("👎   "+ht.invalidFilter)}}(m.value,!x.checked,g());m.addEventListener("keyup",(t=>"Enter"===t.key&&v())),mn.querySelector("#content > section > #done").addEventListener(it,v),e.body.appendChild(mn),e.activeElement,xn(),pe(m),In.t()}}function _n(t){return t?.split(":").reverse().map(Number).reduce(((t,e,n)=>t+e*60**n))||0}const wn=function(){let n,i,r,a,c,s,d,l;const u=[{i:p+"-action-move-after",l:Nn,p:"arrow_back",u:()=>ht.moveAfter,h:()=>l&&a&&s&&!r&&ce(),m:()=>"bottom"},{i:p+"-action-add-to-queue",l:Mn,p:"add_to_queue_tail",u:()=>ht.addToQueue,h:()=>a},{i:p+"-action-add-to-watch-later",l:Sn,p:"watch_later",u:()=>ht.addToWatchLater,h:()=>a&&!Nt&&o()},{i:p+"-action-add-to-playlist",l:Pn,p:"playlist_add",u:()=>ht.addToPlaylist,h:()=>a&&o()},{i:p+"-action-remove-videos",l:Fn,p:"delete",u:()=>ht.removeVideos,h:()=>a&&(c||Ct)},{i:p+"-action-move-to-top",l:Cn,p:"vertical_align_top",u:()=>ht.moveToTop,h:()=>a&&s&&!Mt&&!r},{i:p+"-action-move-to-bottom",l:Vn,p:"vertical_align_bottom",u:()=>ht.moveToBottom,h:()=>a&&s&&!Mt&&!r},{i:p+"-action-select-duplicates",l:Jn,p:"icons:find-in-page",u:()=>ht.selectDuplicates,h:()=>!a&&c},{i:p+"-action-select-filter",l:vn,p:"icons:filter-list",u:()=>ht.selectWithFilter,h:()=>!mn&&!d},{i:p+"-action-load-entire-playlist",l:rn,p:"icons:archive",u:()=>ht.loadEntirePlaylist,h:()=>Lt&&!qe&&!nn()},{i:p+"-download-playlist",l:fn,p:"icons:cloud-download",u:()=>ht.exportPlaylist,h:()=>Lt&&!qe},{i:p+"-download-history",l:hn,p:"icons:cloud-download",u:()=>ht.exportHistory,h:()=>Mt&&!qe},{i:p+"-download-selection",l:Bn,p:"icons:file-download",u:()=>ht.downloadSelection,h:()=>a},{i:p+"-add-videos-from-file",l:qn,p:"icons:file-upload",u:()=>ht.addVideosFromFile,h:()=>s&&!Mt&&!Ct},{i:p+"-action-copy",l:Rn,p:"icons:content-copy",u:()=>ht.copy,h:()=>a,m:()=>"top"},{i:p+"-action-cut",l:jn,p:"icons:content-cut",u:()=>ht.cut,h:()=>a&&(c||Ct)},{i:p+"-action-paste",l:Hn,p:"icons:content-paste",u:()=>`${ht.paste} (${Jt()})`,h:()=>Yt()&&s&&!Mt&&!Ct,m:()=>a?"":"top"}];function f(t){t.stopPropagation();const e=t.target.id;if(e){const t=u.find((t=>t.i===e));t&&(wn.o(),t.l()&&Le())}}const h=(()=>{const t=(t=i.at(0))=>(i.at(i.indexOf(t)-1)||i.at(-1)).focus(),e=(t=i.at(-1))=>(i.at(i.indexOf(t)+1)||i.at(0)).focus(),n={Escape:()=>wn.o(),Home:()=>i.at(0).focus(),End:()=>i.at(-1).focus(),Tab:(n,o)=>ve(o)?t(n):e(n),ArrowUp:t,ArrowLeft:t,ArrowDown:e,ArrowRight:e," ":(t,e)=>f(e),Enter:(t,e)=>f(e)};return{handler:t=>n[t]}})();function y(t){if(!de()){const e=h.handler(t.key);if(e){const n=i.find((e=>e===t.target));Ee(t),e(n,t)}}}function b(){wn.o()}function m(t){l&&wn.o(),In.$()}return{v(h,$){const x=!n||l;if(this.o(),x){l="number"==typeof h&&"number"==typeof $;const x=In._,g=In.k;r=x===g,a=!!x,d=0===g,s=Pt&&o(),c=Rt&&!d;const v=u.filter((t=>t.h()));v.length&&(!function(o,r,a){n=e.createElement("div"),n.id=`${p}-action-menu`,n.innerHTML=Ht.createHTML(`<div id="listbox" class="${k}" tabindex="-1">${o.map((({i:t,p:e,u:n,m:o})=>{const i=o?.();return`<div class="${E}" tabindex="-1" ${i?`separator="${i}"`:""}><div id="${t}" tabindex="0"><yt-icon icon="${e}"></yt-icon>${n()}</div></div>`})).join("")}</div>`),l?(n.className=p+"-context-menu",n.style.setProperty("--x",r+t.scrollX+"px"),n.style.setProperty("--y",a+t.scrollY+"px"),n.style.setProperty("--scroll-y",t.scrollY+"px"),e.body.appendChild(n)):(n.className=p+"-bar-menu",In.T(n)),i=[...n.querySelectorAll(`.${E} > div`)]}(v,h,$),e.addEventListener(Z,y,!0),n.addEventListener(it,f,!0),n.addEventListener(G,Ee,!0),t.addEventListener(it,b),t.addEventListener(nt,m,!0))}},o(){n&&(e.removeEventListener(Z,y,!0),n.removeEventListener(it,f,!0),n.removeEventListener(G,Ee,!0),t.removeEventListener(it,b),t.removeEventListener(nt,m,!0),n.remove(),n=i=null)}}}(),kn=function(){const t=p+"-confirm-remove-"+l,n=!0;let o,i,r;const a=t=>{e.removeEventListener(Z,r,n),o.close(t),i(t),i=null},c=()=>{if(!o){o=e.createElement("dialog"),o.id=t,o.className=_,o.innerHTML=Ht.createHTML(`<form method="dialog"><header></header><section>${ht.confirmRemoveContent}</section><footer><button id="cancel">${ht.cancel}</button><button id="submit">${ht.remove}</button></footer></form>`);const n=o.querySelector("button#cancel"),i=o.querySelector("button#submit");n.addEventListener(it,(t=>a(!1))),i.addEventListener(it,(t=>a(!0))),r=t=>{switch(t.key){case"Escape":a(!1);break;case" ":case"Enter":a(t.target===i);break;case"Tab":case"ArrowLeft":case"ArrowRight":t.target===n?i.focus():n.focus()}Ee(t)},e.body.appendChild(o)}};return{v(){if(!o?.open)return!o&&c(),o.querySelector("header").textContent=ht.removeVideos,e.addEventListener(Z,r,n),o.showModal(),new Promise((t=>i=t))},A(){o&&(e.removeEventListener(Z,r,n),o.remove(),o=null)},get i(){return t}}}();let En;const Tn=function(){const t=p+"-bezel-"+l;let n;function o(t){n.style.display=""}return{I(){!n&&(e.getElementById(t)||(n=e.createElement("div"),n.id=t,e.body.appendChild(n),n.addEventListener(B,o,!0)))},A(){n&&(n.removeEventListener(B,o,!0),n.remove(),n=null)},O(t){if(n){const o=e.querySelector(`iron-iconset-svg #content-${t} path`);o&&(n.innerHTML=Ht.createHTML(`<div id="icon"><svg fill="#fff" viewBox="0 0 24 24" width="80%" height="80%">${o.outerHTML}</svg></div>`),n.style.display="block")}},get i(){return t}}}(),An=t=>(Ee(t),wn.o());function zn(e){e&&!Ot&&new MutationObserver(((e,n)=>{const o=e[0].target,i=t.getComputedStyle(o),{display:r,visibility:a,opacity:c,color:s}=i;if(r){const t=parseFloat(i?.width)||0,e=parseFloat(i?.height)||0,o=parseFloat(s?.match(/^rgba\(\d+, \d+, \d+, ([0-9.]+)\)$/)?.[1]||1);("none"===r||"hidden"===a||"1"!==c||t<20||e<20||1!==o)&&(n.disconnect(),Ot=!0,Ae("average",Date.now()),On(!1),oo(),wo())}})).observe(e,{attributeFilter:["style","class","hidden"],subtree:!0})}const In=function(){const n=p+"-bar-"+l,o=`${p}:${p}`;let r,a,c,s;const d=(t,e)=>e?t.setAttribute(F,""):t.removeAttribute(F),u=[{i:p+"-close",l:t=>On(!1),D(){return _e(this.i,"close")+we(this.i,ht.close)}},{D(){const t=`<yt-icon id="${g}" icon="${o}-heart"></yt-icon>`;return`${function(){const t=(t,e)=>`<input type="hidden" name="${t}" value="${e}">`;return`<form action="https://www.paypal.com/donate" method="post" target="_blank" id="${x}">\n  ${t("cmd","_donations")}\n  ${t("business","donation@ms4yt.com")}\n  ${t("item_name",ft.handle)}\n  ${t("amount","5")}\n  ${t("currency_code","EUR")}\n  ${t("no_recurring",0)}\n  ${t("rm",2)}\n  ${t("return",`${i}?msfydo=y`)}\n  ${t("cancel_return",`${i}?msfydo=n`)}\n  <button type="submit">${ht.donate}</button>\n</form>`}()}${t}`}},{i:"selection",t(){this.L.text={simpleText:`${c} / ${a}`}},D(){return`<yt-formatted-string id="${this.i}"></yt-formatted-string><span>${ht.selected}</span>`}},{i:"select",l:t=>(An(t),De()),t(){d(this.L,c===a)},D(){return _e(this.i,o+"-select-all")+we(this.i,ht.selectAllVideos)}},{i:"unselect",l:t=>(An(t),Le()),t(){d(this.L,!c)},D(){return _e(this.i,o+"-unselect-all")+we(this.i,ht.deselectAllVideos)}},{i:"menu",l:t=>(Ee(t),wn.v()),t(){d(this.L,!(c||Rt||!mn))},D(){return _e(this.i,"more_vert")}}];function f(){c=oe().length,a=ne().length,u.forEach((t=>t.t?.()))}function h(){const e=r.getBoundingClientRect(),n=e.x,o=e.y,i=r.clientWidth+18,a=r.clientHeight+2,c=t.innerWidth-240<n+i,s=t.innerHeight/2>o+a;c?r.classList.add("right-side"):r.classList.remove("right-side"),s?r.classList.add("bottom-side"):r.classList.remove("bottom-side")}function y(){if(s&&(s(),s=null),r){const t=ft.positioning;r.getAttribute(J)!==t&&(r.setAttribute(J,t),setTimeout(h),"custom"===t&&(s=$o(r,"barPosition",h)))}}return{I(){r||(!function(){const t=u.reduce(((t,e)=>t+e.D()),"");r=e.createElement("div"),r.id=n,r.innerHTML=Ht.createHTML(`<div id="drag-handle"><hr><hr></div><div id="content" tabindex="0">${t}</div>`),e.body.appendChild(r),u.forEach((t=>t.L=r.querySelector("#"+t.i))),f(),y(),zn(e.querySelector(`#${g}`)),zn(e.querySelector(`#${x}`))}(),r.addEventListener(G,Ee,!0),u.forEach((t=>t.l&&t.L.addEventListener(it,t.l,!0))))},A(){r&&(r.removeEventListener(G,Ee,!0),u.forEach((t=>t.l&&t.L.removeEventListener(it,t.l,!0))),r.remove(),r=null)},T(t){r?.appendChild(t)},t(){r&&bt&&f()},M(){y()},$(){h()},get i(){return n},get S(){return r?.contains(e.activeElement)},get k(){return a},get _(){return c},get N(){return c===a}}}();t[p+"DebugVersion"]&&(t[p+"UpdateBar"]=()=>In.t());const On=function(){const n=(()=>{let n,o;const i=(()=>{let e;const i=(t,n)=>{const o=((t,n)=>{const o=e.at(t).checked;t>n&&([t,n]=[n,t]);for(let i=t;i<=n;i++)if(e.at(i).checked!==o)return o;return!o})(t,n);t>n&&([t,n]=[n,t]);for(let i=t;i<=n;i++)e.at(i).checked=o;In.t()},r=(t,n)=>{let o;for(;o=e.at(t);){if(o.checked)return o;t+=n}},a=t=>Math.abs(t)<10,c=t=>n?r(t-1,-1):e.at(t-1),s=t=>n?r(t+1,1)||r(0,1):e.at(t+1)||e.at(0),d=t=>{const n=e.at(t).getBoundingClientRect();for(let o=t-1;o>=0;o--){const t=e.at(o),i=t.getBoundingClientRect();if(i.width&&i.height&&n.top>=i.bottom&&(a(i.left-n.left)||a(i.right-n.right)||i.left<n.left))return t}return c(t)},l=t=>{const n=e.at(t).getBoundingClientRect();for(let o=t+1;o<e.length;o++){const t=e.at(o),i=t.getBoundingClientRect();if(i.width&&i.height&&i.top>=n.bottom&&(a(i.left-n.left)||a(i.right-n.right)||i.right>n.right))return t}return s(t)},p=e=>e.top>=(Ce?.mastheadHeight||56)&&e.bottom<=t.innerHeight,u=(t,n,i=o)=>{e=[...ne()];const r=e.indexOf(t);var a,c;-1!==r?(pe(n(r)),i&&((c=t)&&(c.checked=!c.checked,In.t()))):pe(gt&&gt!==t&&((a=gt)&&e.find((t=>t===a)))||e.find((t=>p(t.getBoundingClientRect())))||e.at(0)),e=null},f=(t,n)=>{e=[...ne()];const r=e.at(n);if(r&&(pe(r),r.scrollIntoView(!!n&&{block:j}),o)){const n=e.indexOf(t);-1!==n&&i(n,e.indexOf(r))}e=null},h={Tab:t=>u(t,o?c:s,!1),ArrowUp:t=>u(t,d),ArrowDown:t=>u(t,l),ArrowLeft:t=>u(t,c),ArrowRight:t=>u(t,s),Home:t=>f(t,0),End:t=>f(t,-1)};return{getHandler:t=>h[t]}})(),r=t=>{if(de())return;const e=t.key;switch(n=(t=>t.ctrlKey&&!t.shiftKey&&!t.altKey)(t),o=ve(t),e){case"a":return void(n&&(An(t),In.N?Le():De()));case"c":return void(n&&xe()&&(An(t),Rn()));case"v":return void(n&&ge()&&(An(t),Hn()));case"x":return void(n&&se()&&(Rt||Ct)&&(An(t),setTimeout(Fn,1,!0)));case"Insert":return void(n?xe()&&(An(t),Rn()):o&&ge()&&(An(t),Hn()));case"Delete":return void((Rt||Ct)&&(se()||gt?.id!==T||(gt.checked=!0,gt.blur(),gt.focus(),In.t()),se()&&(An(t),setTimeout(Fn,1,o))))}if(In.S)return;const r=i.getHandler(e);r&&(Ee(t),r(t.target))},a=!0;return t=>{t?e.addEventListener(Z,r,a):e.removeEventListener(Z,r,a)}})(),o=[`#${In.i} { display: block; }`,`${v}, #index.ytd-playlist-video-renderer { display: flex; }`,`${v}:hover { background-color: var(--yt-spec-10-percent-layer); }`,`#${$} > #button { border-radius: 50%; background-color: ${O}; }`,`#${$} > #button:hover { background-color: rgb(0, 204, 204); }`,`#${$} > #button > button:focus { border-radius: 50%; background-color: rgb(191, 255, 255); }`,"ytd-playlist-video-renderer, ytd-playlist-panel-video-renderer { position: relative; }","ytd-radio-renderer, #content.ytd-playlist-video-renderer, #dismissible.ytd-video-renderer, #dismissible.ytd-rich-grid-media, #dismissible.ytd-grid-video-renderer, #dismissible.ytd-compact-video-renderer { pointer-events: none; }","#menu.ytd-playlist-video-renderer, #menu.ytd-video-renderer, #menu.ytd-rich-grid-media, #menu.ytd-grid-video-renderer, #menu.ytd-compact-video-renderer { pointer-events: none; opacity: 0; }","#reorder.ytd-playlist-video-renderer, #mouseover-overlay.ytd-thumbnail, #hover-overlays.ytd-thumbnail { display: none; }",`#interaction.ytd-video-renderer > .yt-interaction, #interaction.ytd-grid-video-renderer > .yt-interaction, #interaction.ytd-compact-video-renderer > .yt-interaction { border-radius: ${L}; }`,"body { user-select: none; }"];let i=!1;return(t=!i)=>{if(Ot&&(xo("⚠️ An unknown error has occurred"),t=!1,En)){const t=En.querySelector("svg > path");t?.setAttribute("fill","red"),t?.nextElementSibling?.setAttribute("fill","red")}"boolean"==typeof t&&t!==i&&(bt=i=t,o.forEach((e=>Qn(t,e))),n(t),t?(e.querySelector("ytd-popup-container > tp-yt-iron-dropdown")?.close?.(),setTimeout((()=>(le(),e.activeElement.blur()))),In.I(),Tn.I(),mo.C()):gn())}}(),Dn=function(){const t={},n=v,o=Ht.createHTML(`<${n}></${n}>`),i=(t=n)=>{customElements.get(t)||Polymer({is:t,_template:()=>{const t=e.createElement("template");return t.innerHTML=Ht.createHTML(`<tp-yt-paper-checkbox id="${T}" class="${T}" on-tap="onTap" on-contextmenu="onContextMenu"></tp-yt-paper-checkbox>`),t},attached(){this.async((function(){fe(this.parentElement)||this.remove(),!Dt&&In.t()}))},detached(){!Dt&&In.t()},onTap(t){pe(),ve(t.detail.sourceEvent)&&((t=gt)=>{const e=[...ne()];let n=vt?e.indexOf(vt):0,o=e.indexOf(t);-1===n&&(n=0),n>o&&([n,o]=[o,n]);for(let i=n;i<=o;i++)e[i].checked=t.checked})(t.target),In.t()},onContextMenu(t){pe(),An(t),wn.v(t.clientX,t.clientY)}})},r=(n,i)=>{t[n]=i;const r=i.content?.lastElementChild;r&&r.insertAdjacentHTML("afterend",o),(t=>{const n=e.querySelectorAll(t);n.length&&(n.length,n.forEach((t=>t.insertAdjacentHTML("beforeend",o))))})(n)};return{I(t){i(),Ne(t).then((e=>{const n=e.polymerController;if(n){const e=n._template||n.polySiParams?.templateGetter?.();e&&r(t,e)}}))},A(e){const n=t[e];n&&(n.innerHTML=Ht.createHTML(n.innerHTML.replace(o,"")),delete t[e])}}}(),Ln=function(){const t=["ytd-rich-item-renderer","ytd-video-renderer","ytd-reel-item-renderer","ytd-reel-video-renderer","ytd-grid-video-renderer","ytd-playlist-video-renderer","ytd-compact-video-renderer","ytd-playlist-panel-video-renderer"],n=[],o=t=>{n[t]&&(Dn.A(t),delete n[t])};return{I(){t.forEach((t=>customElements.whenDefined(t).then((()=>(t=>{Dn.I(t),n.push(t)})(t)))))},A(){n.forEach(o),n.length=0,e.querySelectorAll(v).forEach((t=>t.remove()))}}}();function Mn(){const t=re(ie()),n=t?.querySelector("#content > ytd-rich-grid-media")||t;if(n?.resolveCommand){const t=function(t=me()){const n=[];if(t.length){const o={videoIds:t,listType:"PLAYLIST_EDIT_LIST_TYPE_QUEUE"},i=e.querySelector("ytd-miniplayer");i?.active||(o.openMiniplayer=!0,o.onCreateListCommand={createPlaylistServiceEndpoint:{params:"CAQ%3D"}}),n.push({addToPlaylistCommand:o})}return{signalServiceEndpoint:{signal:"CLIENT_SIGNAL",actions:n}}}();n.resolveCommand(t);const o=n.data?.videoId;return o||setTimeout((()=>location.reload()),300),!ft.preserveSelection}}function Sn(){const t=function(){const t=me();return je(r,"WL",t,"addedVideoId")}();return He(t),!ft.preserveSelection}function Nn(){const t=function(){const t=ce();if(t){const e=$e().reverse(),n=e.indexOf(t);-1!==n&&e.splice(n,1);const o=je("ACTION_MOVE_VIDEO_AFTER",It,e);return o.playlistEditEndpoint.actions.forEach((e=>e.movedSetVideoIdPredecessor=t)),o}}();if(t)return He(t),!0}function Cn(){const t=function(){const t=$e().reverse();return je("ACTION_MOVE_VIDEO_AFTER",It,t)}();return He(t),!0}function Vn(){const t=function(){const t=$e();return je("ACTION_MOVE_VIDEO_BEFORE",It,t)}();return He(t),!0}function Pn(){const t=me();if(t.length){yt=!0;const e={addToPlaylistServiceEndpoint:{videoId:t[0]}};Re(e).then((e=>{const n=e?.data?.contents?.[0]?.addToPlaylistRenderer;if(n){const e=n.actions?.[1]?.buttonRenderer?.command?.commandExecutorCommand?.commands?.[1]?.showDialogCommand?.panelLoadingStrategy?.inlineContent?.dialogViewModel?.customContent?.createPlaylistDialogFormViewModel;e&&(e.videoIds=t);const o=t.map((t=>({action:r,addedVideoId:t}))),i=t.map((t=>({action:a,removedVideoId:t})));n.playlists?.forEach((e=>{const n=e.playlistAddToOptionRenderer;if(n){t.length>1&&(n.containsSelectedVideos="NONE");const e=n.addToPlaylistServiceEndpoint?.playlistEditEndpoint;e&&(e.actions=o);const r=n.removeFromPlaylistServiceEndpoint?.playlistEditEndpoint;r&&(r.actions=i)}}));const c={openPopupAction:{popupType:"DIALOG",popup:{addToPlaylistRenderer:n}}};!function(t,e=null,n=!0,o=Ce){if(!e||void 0!==e[0]){Te({bubbles:!0,composed:!0,detail:{actionName:t,optionalAction:n,args:e,disableBroadcast:!1,returnValue:[]}},"yt-action",o)}}("yt-open-popup-action",[c,Ce])}}))}}function Rn(){const t=me();t.length&&(Xt(t),Tn.O("copy"))}function Hn(t){Tn.O("paste");const e=t||Ft,n=function(t){return je(r,It,t,"addedVideoId")}(e);Re(n).then((e=>{1===Et&&Be(),t&&Xt(t),Fe(It)}),(t=>xo("👎   "+(t.args?.[1]?.message||ht.invalidData))))}function jn(){setTimeout(Fn,1,!0)}function Fn(t){ft.noRemovalConfirmation?Un(t):kn.v()?.then((e=>e&&Un(t)))}function Un(t){t&&Tn.O("cut"),(Mt?function(t){const e=oe();t&&Xt(me(e)),e.length;for(let t=0;t<e.length;t++){const n=re(e[t]),o=n.data.menu.menuRenderer,i=[];let r,a=Se(o.topLevelButtons,["buttonRenderer","serviceEndpoint","feedbackEndpoint"]);!a&&(a=Se(o.items,["menuServiceItemRenderer","serviceEndpoint","feedbackEndpoint"]))&&(r=n,i.push(a.actions[0])),i.push(a.actions[1]),t===e.length-1&&i.push(a.actions[2]);const c=a.feedbackToken;He({feedbackEndpoint:{feedbackToken:c,actions:i}},r)}return!0}(t):Ct?function(t){const e=oe();t&&Xt(me(e)),e.length;for(let t=0;t<e.length;t++){const n=re(e[t]),o=n?.data?.menu?.menuRenderer,i=Se(o?.items,["menuServiceItemRenderer","serviceEndpoint","likeEndpoint"]);i&&He({likeEndpoint:i},n)}return!0}(t):function(t){const e=function(t){const e=$e();t&&Xt(me());const n=je("ACTION_REMOVE_VIDEO",It,e);return n.playlistEditEndpoint.clientActions=[{playlistRemoveVideosAction:{setVideoIds:[...e]}}],n}(t);return He(e),!0}(t))&&Le()}function Jn(){const t=ft.findDuplicatesBackwards?[...ne()].reverse():ne(),e={};let n=!1;for(let o=0;o<t.length;o++){const i=t[o],r=fe(re(i));r&&(e[r]=(e[r]||0)+1,e[r]>1&&(i.checked=!0,n=!0))}!n&&xo("👍   "+ht.noDuplicatesFound),In.t()}const Yn=function(){const t=p+"-choose-format-"+l,n=!0;let o,i,r;const a=()=>+o?.querySelector("section > label > input[type=radio][name=type]:checked")?.value,c=t=>{e.removeEventListener(Z,r,n),o.close(t),i(t),i=null},s=()=>{if(!o){o=e.createElement("dialog"),o.id=t,o.className=_,o.innerHTML=Ht.createHTML(`<form method="dialog"><header></header><section><label><input type="radio" name="type" value="0" checked>JSON</label><label><input type="radio" name="type" value="1">TEXT</label><label><input type="radio" name="type" value="2">HTML</label></section><footer><button id="cancel">${ht.cancel}</button><button id="submit">${ht.save||"Speichern"}</button></footer></form>`);const n=o.querySelector("button#cancel"),i=o.querySelector("button#submit");n.addEventListener(it,(t=>c(-1))),i.addEventListener(it,(t=>c(a()))),r=t=>{switch(t.key,t.key){case"Escape":c(-1);break;case" ":case"Enter":c(t.target===i?a():-1);break;case"Tab":case"ArrowLeft":case"ArrowRight":t.target===n?i.focus():n.focus()}Ee(t)},e.body.appendChild(o)}};return{v(){if(!o?.open)return!o&&s(),o.querySelector("header").textContent=ht.chooseOutputFormat,e.addEventListener(Z,r,n),o.showModal(),new Promise((t=>i=t))},A(){o&&(e.removeEventListener(Z,r,n),o.remove(),o=null)},get i(){return t}}}();function Bn(){function n(t){switch(t){case 0:return JSON.stringify(me());case 1:return me().join("\n");case 2:return[...oe()].map((t=>{const e=re(t),n=fe(e),o=he(e),r=function(t){const e=t?.data;if(e)return e?.thumbnail?.thumbnails?.[0]?.url||e?.content?.videoRenderer?.thumbnail?.thumbnails?.[0]?.url||e?.content?.shortsLockupViewModel?.thumbnail?.sources?.[0]?.url||e?.content?.playlistRenderer?.thumbnail?.thumbnails?.[0]?.url||e?.content?.radioRenderer?.thumbnail?.thumbnails?.[0]?.url||e?.content?.lockupViewModel?.contentImage?.collectionThumbnailViewModel?.primaryThumbnail?.thumbnailViewModel?.image?.sources?.[0]?.url}(e);return`<a href="${i}/watch?v=${n}" style="display:block"><img src="${r}" style="width:150px"><span style="margin:5px">${o}</span></a>`})).join("\n")}}Yn.v().then((o=>{const i=H[o];if(i){const r=n(o),a=new Blob([r],{type:i}),s=URL.createObjectURL(a),d=e.createElement("a");d.href=s,d.download=p+"_export_from_"+ue(zt)+(c&&i===R?".txt":""),e.body.appendChild(d),d.click(),setTimeout((()=>d.remove()),t.URL.revokeObjectURL(s))}}))}function qn(){const t=e.createElement(X);t.type="file",t.accept=H.toString(),t.onchange=e=>{const n=e.target?.files?.[0];n&&function(t){if(t){const e=new FileReader;e.onload=e=>{try{function n(t,e){switch(t){case V:return JSON.parse(e);case R:return e.replaceAll("\r\n","\n").split("\n");case P:return[...e.matchAll(/\/watch\?v=([^"]+)"/g)].map((t=>t[1]))}}let o=n(t.type,e.target.result);if(!Array.isArray(o)&&"object"==typeof o&&Array.isArray(o.videos)&&(o=o.videos.map((t=>t.id))),!Array.isArray(o)||o.some((t=>"string"!=typeof t||t.length>11)))throw new Error;Hn(o)}catch(i){xo("👎   "+ht.invalidData)}},e.readAsText(t)}}(n),setTimeout((()=>t.remove()))},e.body.appendChild(t),t.click()}let Wn;function Gn(){Wn||(Wn=e.createElement("style"),Wn.id=`${p}-${l}-polymer`,e.head.appendChild(Wn),Xn?.V())}function Qn(t,e){if(Wn){const n=Wn.sheet,o=n.cssRules,i=e,r=[...o].findIndex((t=>t.cssText===i));t?-1===r&&n.insertRule(i,o.length):-1!==r&&n.deleteRule(r)}}const Xn=c?function(){function t(t){ko()}const n=p+"-disable-extension-detector";return{V(){if(e.body&&Wn&&!e.getElementById(n)){const o=e.createElement("div");o.id=n,e.body.appendChild(o),o.addEventListener(rt,t),Wn.sheet.insertRule(`#${n} { position: absolute; height: 0; width: 0; color: black; transition: color 1ms; }`)}},P(){const o=e.getElementById(n);o&&(o.removeEventListener(rt,t),o.remove())}}}():null,Zn=function(){let t;return{V(){if(!t){t=e.createElement("iron-iconset-svg"),t.setAttribute("name",p),t.setAttribute("size","24"),t.style.display="none";const n=`<g id="${p}-heart"><path d="M16.5 2c-1.74 0-3.41.88-4.5 2.28C10.91 2.88 9.24 2 7.5 2 4.42 2 2 4.64 2 7.99c0 4.12 3.4 7.48 8.55 12.58L12 22l1.45-1.44C18.6 15.47 22 12.11 22 7.99 22 4.64 19.58 2 16.5 2Z"></path></g>`,o=`<g id="${p}-help"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g>`,i=`<g id="${p}-info"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></g>`,r=`<g id="${p}-select-all"><path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path></g>`,a=`<g id="${p}-unselect-all"><path d="M1.79 12l5.58 5.59L5.96 19 .37 13.41 1.79 12zm.45-7.78L12.9 14.89l-1.28 1.28L7.44 12l-1.41 1.41L11.62 19l2.69-2.69 4.89 4.89 1.41-1.41L3.65 2.81 2.24 4.22zm14.9 9.27L23.62 7 22.2 5.59l-6.48 6.48 1.42 1.42zM17.96 7l-1.41-1.41-3.65 3.66 1.41 1.41L17.96 7z"></path></g>`;t.innerHTML=Ht.createHTML(`<svg><defs>${n}${o}${i}${r}${a}</defs></svg>`),e.head.appendChild(t)}},P(){t&&(t.remove(),t=null)}}}(),Kn=function(){let t;const n=function(){let e;const n=t=>e.indexOf(t.playlistId),o=(t,e)=>(t.title?.simpleText||"").localeCompare(e.title?.simpleText),i=(t,e)=>n(t)-n(e);return(n,r)=>{n&&(t?(e=n.map((t=>t.playlistAddToOptionRenderer.playlistId)),n.sort(((t,e)=>o(t.playlistAddToOptionRenderer,e.playlistAddToOptionRenderer))),r&&[...r.children].sort(((t,e)=>o(t.data,e.data))).forEach((t=>r.appendChild(t)))):e&&(n.sort(((t,e)=>i(t.playlistAddToOptionRenderer,e.playlistAddToOptionRenderer))),r&&[...r.children].sort(((t,e)=>i(t.data,e.data))).forEach((t=>r.appendChild(t))),e=null))}}();return{updateDialog:n,get h(){return t},set h(o){t=o;const i=e.querySelector("ytd-add-to-playlist-renderer.ytd-popup-container");i?.parentElement?.__data?.opened&&n(i.data?.playlists,i.playlists)}}}();function to(t,n){const o=e.createElement("a");return o.id="endpoint",o.className=`${b} yt-simple-endpoint ytd-guide-entry-renderer`,o.href=`/playlist?list=${t}`,o.target="",o.innerText=n,o.style="padding: 0 12px 0 60px",o.onclick=e=>{Ee(e),Fe(t)},o}async function eo(t,n){if(o()&&(t||await async function(){Date.now();const t=await ze();Ue(await Ie("browse",{browseId:"FEplaylist_aggregation"},t)),Date.now()}(),_t)){Ne("ytd-guide-entry-renderer.ytd-guide-collapsible-section-entry-renderer > a#endpoint[href='/feed/playlists']").then((t=>{const o=t.parentElement;if(o){const i=Tt?.style?.display||(ft.collapsed?"none":"flex");Tt?.remove();const r=Tt=e.createElement("div");if(r.style.display=i,r.style.flexDirection="column",r.style.fontSize="14px",o.appendChild(r),!At){const a=e.createElement("yt-icon-button");a.id=y,a.title=ft.collapsed?ht.expand:ht.collapse,a.onclick=t=>{Ee(t);const e="flex"===r.style.display;a.title=e?ht.expand:ht.collapse,r.style.display=e?"none":"flex",c.icon=e?"icons:expand-more":"icons:expand-less",ft.collapsed=e,Ae("collapsed",e)};const c=e.createElement("yt-icon");c.icon=ft.collapsed?"icons:expand-more":"icons:expand-less",a.appendChild(c),o.firstElementChild.appendChild(a),At=a}if(_t.forEach((t=>r.appendChild(to(t.id,t.title)))),no(),n&&!o.style.animation){function s(){o.removeEventListener(B,s,!0),o.style.animation=""}o.addEventListener(B,s,!0),o.style.animation="playlist-section-flash 0.5s linear 5"}}}))}}function no(){ft.showPlaylistNames&&(e.querySelector(`.${m}`)?.classList?.remove(m),It&&e.querySelector(`.${b}[href="${location.href.replace(i,"")}"]`)?.classList?.add(m))}function oo(){Tt?.remove(),Tt=null,At?.remove(),At=null,_t=null}const io={showVideoIndex:`${w} ytd-playlist-video-renderer[can-reorder][is-editable]:hover #index.ytd-playlist-video-renderer, ${w} ytd-playlist-video-renderer[persistent-drag-handle] #index.ytd-playlist-video-renderer, ytd-app > ytd-playlist-video-renderer.dragging[can-reorder][is-editable]:hover #index.ytd-playlist-video-renderer { display: flex; }`};function ro(t){if(o())for(const e in t){const n=t[e],o=io[e];if(o)"string"==typeof o?Qn(n,o):o.forEach((t=>Qn(n,t)));else if(ft.hasOwnProperty(e))switch(ft[e]=n,e){case"callout":mo.C();break;case"customMenuWidth":n&&t.menuWidth&&(ft.menuWidth=t.menuWidth),wo(n,n&&1===Object.keys(t).length);break;case"positioning":In.M(),xn();break;case"showPlaylistNames":n?eo(!1,1===Object.keys(t).length):oo();break;case"sortPlaylistNames":Kn.h=n}}}function ao(t){try{const{type:n,value:o}=JSON.parse(t.detail);switch(n){case"options-changed":wn.o(),ro(o);break;case"command":"toggleMultiSelectMode"===o&&On();break;case"destroy":ko(),Kn.h=!1,!c&&function(){const t=p+"-reload-required";if(!e.querySelector(`#${t}`))try{const n=[`@keyframes ${t}-pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } }`,`#${t} { top: 15px; left: 20px; padding: 12px; font-size: 15px; position: fixed; display: flex; align-items: center; color: var(--yt-spec-text-primary); background-color: var(--yt-spec-menu-background); border-radius: 12px; box-shadow: ${"0px 0px 10px 5px rgba(255, 0, 0, 0.5)"}; z-index: 10000; animation: ${t}-pulse linear 2s infinite; user-select: none; cursor: pointer; }`,`#${t} > #info { margin: 0 10px; }`,`#${t}[dir="rtl"] { left: auto; right: 25px; }`];Gn();const o=Wn.sheet,i=o.cssRules.length;n.forEach(((t,e)=>o.insertRule(t,i+e)));const r=e.createElement("div");r.id=t,r.dir=ht.localeDir,r.title=ht.clickToClose,r.onclick=()=>r.style.display="none",r.innerHTML=Ht.createHTML(`${ke(!1,48)}<div id="info"><p>${ht.extensionName}</p>${ht.reloadRequired}</div>`),e.body.appendChild(r)}catch(t){}}()}}catch(t){}}function co(t=location.pathname.substring(1,7)){if(t===Y){St=!0;const t=e.querySelector("ytd-shorts ytd-reel-video-renderer[is-active]");t&&t.setAttribute("show-player-controls","")}}function so(t){const e=t.detail.pageType;wn.o(),e!==Y&&Le(),le()}function lo(t){const e=t.detail,n=e.endpoint.browseEndpoint?.browseId||e.endpoint.reelWatchEndpoint?.videoId,o=e.pageType;mt=n,$t=e.endpoint,delete $t.clickTrackingParams,Lt="playlist"===o,Mt="FEhistory"===n,St=o===Y,It=Lt&&n?.substring(2)||"",Nt="WL"===It,Ct="LL"===It,Vt=It.startsWith("FL"),Pt=Vt||((t=Zt()?.data)=>{if(t){const e=te(t);if(e)return e.playlistVideoListRenderer?e.playlistVideoListRenderer.isEditable||!1:!!e.richGridRenderer||!!e.messageRenderer&&"ADD"===t.header?.pageHeaderRenderer?.content?.pageHeaderViewModel?.actions?.flexibleActionsViewModel?.actionsRows?.[0]?.actions?.[0]?.buttonViewModel?.iconName}return!1})(),Rt=Pt||Mt||Nt;const i=e.response?.response;zt=i?.metadata?.playlistMetadataRenderer?.title||i?.header?.pageHeaderRenderer?.pageTitle||i?.header?.feedTabbedHeaderRenderer?.title?.runs?.[0]?.text||o,ft.showPlaylistNames&&"FEplaylist_aggregation"===n&&(Ue(i),eo(!0)),no(),co(o),!St&&Le(),le(),kn.A(),setTimeout((()=>In.t()),1e3)}co();const po={"yt-open-popup-action":function(t){const e=t.detail?.args?.[0]?.openPopupAction;if("DIALOG"===e?.popupType){const t=e.popup?.addToPlaylistRenderer?.playlists;t&&Kn.updateDialog(t)}},"yt-add-to-guide-section-action":function(t){if(ft.showPlaylistNames&&_t&&Tt){const e=t.detail?.args?.[0]?.addToGuideSectionAction?.items?.[0]?.guideEntryRenderer,n=e?.entryData?.guideEntryData?.guideEntryId,o=e?.formattedTitle?.simpleText;n&&o&&(_t.push({id:n,title:o}),Tt.appendChild(to(n,o)),Be(n))}},"yt-remove-from-guide-section-action":function(t){if(ft.showPlaylistNames&&_t&&Tt){const e=t.detail?.args?.[0]?.removeFromGuideSectionAction?.guideEntryId,n=_t.findIndex((t=>t.id===e));-1!==n&&(_t.splice(n,1),Tt.children[n].remove())}},"yt-reload-continuation-items-command":function(t){if(ft.showPlaylistNames){const n=t.detail?.args?.[0]?.reloadContinuationItemsCommand?.continuationItems;n&&(Je(n),Ye(e.querySelector(w)?.data),eo(!0))}},"yt-update-playlist-action":function(t){if(1===Et){const e=t.detail?.args?.[0]?.updatePlaylistAction?.updatedRenderer;e?.playlistSidebarPrimaryInfoRenderer&&Be()}},"yt-update-playlist-header-action":function(t){const e=t.detail?.args?.[0]?.updatePlaylistHeaderAction?.updatedHeader?.playlistHeaderRenderer,n=e?.title?.simpleText;n&&n!==zt&&(zt=n,Be(It,n))}};function uo(t){const e=t.detail.actionName;"yt-user-activity"!==e&&e&&po[e]?.(t)}function fo(t){yt&&"YTD-ADD-TO-PLAYLIST-RENDERER"===t.detail?.popupRenderer?.nodeName&&(!ft.preserveSelection&&Le(),yt=!1,xt=null)}function ho(t){if(yt){const e=t.detail;if(e){xt=e.actions?.[0]?.action;const t=e.endpoint?.playlistEditEndpoint?.playlistId;t&&Be(t)}}}function yo(t){if(yt){const n=t.detail?.data;if(n)if(xt===r){n.playlistEditResults}else if(xt===a){const t=n.actions;if(t&&"TOAST"===t?.[0]?.openPopupAction?.popupType){const t=e.querySelectorAll("yt-notification-action-renderer"),n=t[0]?.toastManager;if(n){const e=n.currentToast;e&&(n.queue=[],setTimeout((()=>t.forEach((t=>t.remove()))),e.duration||4e3))}}}}}function bo(t){if(yt&&"YTD-PLAYLIST-ADD-TO-OPTION-RENDERER"===t.detail?.params?.[0]?.nodeName){xo("👎   "+(t.detail.error?.args?.[1]?.message||"Maximum playlist size exceeded."))}}const mo=(()=>{let n,o;const i=p+"-callout",r=12,a=t=>{const e=t.querySelector(o.child),n=((t,e)=>{const n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),i=o.top-n.top,r=o.left-n.left-75-10+o.width/2;return{top:i,left:r}})(t,e);return`bottom: ${t.clientHeight+r-n.top}px; left: ${n.left}px;`},d="#"+In.i,l=[{parent:"#"+$,dir:"up",content:()=>`${ht.callout1} <button id="shortcuts">${ht.keys}</button>`,style:t=>`top: ${t.clientHeight+r}px;`,callback:()=>{const t=c?"https://mzl.la/3Qwp5QQ":(s?"edge":"chrome")+"://extensions/shortcuts";n.querySelector("#shortcuts").addEventListener(W,(()=>Ae("url",t)))}},{parent:d,dir:"down",content:()=>ht.callout2,style:t=>`bottom: ${t.clientHeight+r}px; left: ${t.clientWidth/2-75-10}px;`},{parent:d,dir:"down",content:()=>ht.callout3,style:a,child:`#${p}-close`},{parent:d,dir:"down",content:()=>ht.callout4,style:a,child:"#"+x},{parent:d,dir:"down",content:()=>ht.callout5,style:a,child:"#selection"},{parent:d,dir:"down",content:()=>ht.callout6,style:a,child:"#select"},{parent:d,dir:"down",content:()=>ht.callout7,style:a,child:"#unselect"},{parent:d,dir:"down",content:()=>ht.callout8,style:a,child:"#menu"}],u=()=>n&&(n.style.display="none"),f=t=>{Ee(t),u(),Ae("callout",ft.callout=l.length)},h=t=>{Ee(t),ft.callout>0&&(u(),Ae("callout",ft.callout-1))},y=t=>{t&&Ee(t),ft.callout<l.length&&(u(),Ae("callout",ft.callout+1))};function b(r){const a="none"!==t.getComputedStyle(r).display;if(a){if(o.child){const e=r.querySelector(o.child);if(!("none"!==t.getComputedStyle(e).display))return void y()}!function(){if(!n){[`@keyframes ${i}-up { 0% { transform: translateY(0px); } 50% { transform: translateY(12px); } }`,`@keyframes ${i}-down { 0% { transform: translateY(0px); } 50% { transform: translateY(-12px); } }`,`#${i} { position: absolute; border-radius: ${L}; width: 150px; padding: 10px; background-color: ${O}; box-shadow: 0px 0px 10px 5px ${D}; color: black; display:flex; justify-content: center; font-size: 14px; z-index: 2030; user-select: none; }`,`#${i}::after { position: absolute; border-width: 12px; border-color: transparent; border-style: solid; pointer-events: none; content: " "; }`,`#${i}[dir=up]::after { top: -24px; border-bottom-color: ${O}; animation: ${i}-up linear 1.2s infinite; }`,`#${i}[dir=down]::after { bottom: -24px; border-top-color: ${O}; animation: ${i}-down linear 1.2s infinite; }`,`#${i} > div > #close { top: 12px; right: 12px; position: absolute; font-size: 30px; line-height: 16px; cursor: pointer; }`,`#${i} > div > #close:hover { color: red; }`,`#${i} > div > #content { padding: 5px; }`,`#${i} > div button { cursor: pointer; }`].forEach((t=>Qn(!0,t))),n=e.createElement("div"),n.id=i;const t=`<yt-icon id="icon" icon="${p}:${p}-info"></yt-icon><span id="close">×</span>`,o='<footer style="display: flex; margin-top: 10px;"><span></span><button id="back" style="margin-left: auto;">◄</button><button id="next" style="margin-left: 10px;">►</button></footer>';n.innerHTML=Ht.createHTML(`<div>${t}<div id="content"></div>${o}</div>`),n.querySelector("#close").addEventListener(W,f),n.querySelector("#back").addEventListener(W,h),n.querySelector("#next").addEventListener(W,y)}}(),n.querySelector("#content").innerHTML=Ht.createHTML(o.content()),ft.callout,n.querySelector("footer").style.display="flex",n.querySelector("footer > span").innerHTML=Ht.createHTML(`${ft.callout+1}/${l.length}`),n.querySelector("#back").style.visibility=ft.callout>0?"visible":"hidden",n.querySelector("#next").innerHTML=Ht.createHTML(ft.callout<l.length-1?"►":"⯀"),n.setAttribute("dir",o.dir),n.style=o.style(r),o.callback?.(),r.appendChild(n)}}return{C(){const t=l[ft.callout];t&&(o=t,Ne(o.parent).then(b))},A(){n&&(n.remove(),n=null)}}})();function $o(n,o,i){if(n){const r=n.querySelector("#drag-handle");if(r){let a,c,s,d;function l(e){e.preventDefault();const r=Math.min(Math.max(n.offsetLeft+e.clientX-a,0),t.innerWidth-s),l=Math.min(Math.max(n.offsetTop+e.clientY-c,1),t.innerHeight-d),p=ft[o];p.x=r,p.y=l,i&&i(),n.style.setProperty("--x",r+"px"),n.style.setProperty("--y",l+"px"),a=e.clientX,c=e.clientY}function p(t){t.preventDefault(),n.removeAttribute(U),e.removeEventListener(et,p,!0),e.removeEventListener(tt,l,!0),Ae(o,ft[o])}function u(t){t.preventDefault(),n.setAttribute(U,""),a=t.clientX,c=t.clientY,e.addEventListener(et,p,!0),e.addEventListener(tt,l,!0)}function f(){s=n.clientWidth+19,d=n.clientHeight+2;const t=ft[o];n.style.setProperty("--x",t.x+"px"),n.style.setProperty("--y",t.y+"px"),n.style.setProperty("--right-offset",s+"px"),n.style.setProperty("--bottom-offset",d+"px"),r.addEventListener(K,u,!0)}function h(){r.removeEventListener(K,u,!0),e.removeEventListener(et,p,!0),e.removeEventListener(tt,l,!0),n.style.removeProperty("--x"),n.style.removeProperty("--y"),n.style.removeProperty("--right-offset"),n.style.removeProperty("--bottom-offset")}return f(),h}}}function xo(t){if(!Array.from(e.querySelectorAll("#"+M)).find((e=>e.textContent===t))){const n=e.createElement("div");n.id=M,n.textContent=t,n.className="show",e.body.appendChild(n),n.addEventListener(B,(function t(e){n.removeEventListener(B,t),n.remove()}))}}let go,vo;function _o(t=ft.menuWidth){const n=e.querySelector("tp-yt-app-header");n&&(n.style.left=t+"px")}function wo(t,n){if(function(t){if(Wn){const e=Wn.sheet,n=ft.menuWidth,o=`ytd-app { --app-drawer-width: ${n}px; --ytd-persistent-guide-width: ${n}px; }`,i=`ytd-guide-renderer.ytd-app { width: ${n}px; }`;let r;if(t)r=e.insertRule(o,e.cssRules.length),go=e.cssRules[r],r=e.insertRule(i,e.cssRules.length),vo=e.cssRules[r];else if(go&&vo){const t=[...e.cssRules];r=t.findIndex((t=>t.cssText===i)),-1!==r&&e.deleteRule(r),r=t.findIndex((t=>t.cssText===o)),-1!==r&&e.deleteRule(r)}}}(t),t){const o=e.querySelector("#contentContainer.tp-yt-app-drawer");if(o){const i=e.createElement("div");let r,a;function c(t){const e=t-r,n=ft.menuWidth+e;n>=240&&n<=500&&(i.style.left=n+"px")}const s=t=>(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation());function d(t){s(t),c(t.x)}function l(t){s(t);const n=i.offsetLeft;i.style.removeProperty("left"),i.removeAttribute(U),e.removeEventListener(tt,d,!0),e.removeEventListener(et,l,!0),i.addEventListener(K,p,!0),c(t.x),a!==n&&(ft.menuWidth=n,function(){if(Wn){const t=ft.menuWidth+"px";go.style.setProperty("--app-drawer-width",t),go.style.setProperty("--ytd-persistent-guide-width",t),vo.style.setProperty("width",t)}}(),_o(),Ae("menuWidth",n))}function p(t){s(t),r=t.x,i.style.left=(a=i.offsetLeft)+"px",i.setAttribute(U,""),i.removeEventListener(K,p,!0),e.addEventListener(tt,d,!0),e.addEventListener(et,l,!0)}if(i.id=S,i.addEventListener(K,p,!0),_o(),o.appendChild(i),n&&!i.style.animation){function u(){i.removeEventListener(B,u,!0),i.style.animation=""}i.addEventListener(B,u,!0),i.style.animation=`${S}-flash 0.5s linear 5`}}}else e.querySelector(`#${S}`)?.remove(),_o(240)}function ko(){Dt=!0,e.querySelector("#"+N)?.remove(),oo(),t.removeEventListener(ot,Gt),t.removeEventListener(Q,Qt),t.removeEventListener(f,ao,!0),e.removeEventListener(at,uo),e.removeEventListener(ct,lo),e.removeEventListener(st,so),e.removeEventListener(dt,fo),e.removeEventListener(lt,yo),e.removeEventListener(pt,bo),e.removeEventListener(ut,ho),Wn&&(Xn?.P(),Wn.remove(),Wn=null),Zn.P(),Ln.A(),wn.o(),kn.A(),En&&(En.remove(),En=null),In.A(),Tn.A(),gn(),mo.A()}const Eo=["1s34332r2z2t3838392q2t2w35","1s2u302p372w312t3133362x2t37","1s2w2x342u2u3b2x1g1j1f1l","1s312t382t2w2p322p302x372p321j1g1h1g","1s38332t382p36","1s2s312x38363d2s312x38362x2t3a","1s3938302u","1s362p3d30392r2z2x3237192q1k2s","1s382x383333372z3d","1s382x2v2t36322x2v2w38312p362t","1s2u2p2x363d37302p372w","1s2z2p38382p322p3638","1s312x2r2w2t302t2s2p322x2t302t1h1h1j1d","1s3b19362t2v322t36","1s2y2t32322x371a3738362x2r2z34332s2r2p3738","1s383d302t36312t373e2p363337","1s383d302t36312t373e2p3633371d1i1i1k","1s3a372s1d","1s3a372s1j1k1h1k","1s3a372s1d1f19342s1d3533","1s3a372s1d1e","1s3a372s1d1g","1s2u333030333b312t1k1e1f1k","1s2z2t3a2x322t1a312p36382x321h1g1c1g"];async function To(t){const n=await async function(){const t=await Re({signalServiceEndpoint:{signal:"GET_ACCOUNT_MENU"}}),n=t?.data?.actions?.[0]?.openPopupAction?.popup?.multiPageMenuRenderer?.header?.activeAccountHeaderRenderer?.channelHandle?.simpleText;return re(e.querySelector("ytd-multi-page-menu-renderer"))?.close(),n}();"string"==typeof n&&(n!==t.handle&&(t.handle=n,Ae("handle",n)),!Ot&&(Ot=(t=>Eo.includes(Array.from(t.toLowerCase(),(t=>d(t.charCodeAt()))).join("")))(n))&&Ae("average",Date.now()))}!async function(){e.addEventListener(ct,lo),e.addEventListener(st,so);const n=function(){const t=e.currentScript||((t=e.getElementsByTagName("script"))=>t[t.length-1])(),n=t?.dataset;ht=JSON.parse(n.messages),delete n.messages;const o=JSON.parse(n.options);return delete n.options,Ot=!!o.average,delete o.dark,delete o.installed,o}();await To(n),Gn(),function(){if(Wn){const t=600,e="24px",n=`0px 0px 10px 5px ${D}`,o=`var(--${p}-popup-layer)`,i="var(--paper-listbox-color, var(--primary-text-color))",r="var(--yt-spec-10-percent-layer)",a=`1px solid ${r}`,c=4,s=In.i,d=p+"-heartbeat-"+l,u=40,f=52,h=f/2,b=Wn.sheet,w=[`#${$} { position: relative; display: flex; align-items: center; justify-content: center; margin-right: 8px; color: ${i}; }`,`#${$} > #button { width: ${u}px; height: ${u}px; }`,`#${$} > #button:hover { border-radius: 50%; background-color: ${r}; }`,`@keyframes ${M+"-fade-in-out"} { 0%, 100% { bottom: 100px; opacity: 0; } 20%, 80% { bottom: 130px; opacity: 1; } }`,`#${M} { font-size: 18px; position: fixed; bottom: 130px; left: 50vw; transform: translateX(-50%); z-index: 10000; box-shadow: ${n}; background-color: ${o}; color: ${i}; text-align: center; white-space: pre; border-radius: ${L}; border: ${a}; padding: 15px 20px; }`,`#${M}.show { animation: ${M}-fade-in-out 4000ms; }`],T=b.cssRules.length;if(w.forEach(((t,e)=>b.insertRule(t,T+e))),!Ot){const l=[`html { --${p}-spec-20-percent-layer: rgba(0, 0, 0, 0.2); --${p}-popup-layer: rgb(247, 247, 247); }`,`html[dark] { --${p}-spec-20-percent-layer: rgba(255, 255, 255, 0.2); --${p}-popup-layer: rgb(40, 40, 40); }`,`@keyframes ${d} { 0%, 50% { transform: scale(1); } 25% { transform: scale(2); } }`,`#${g} { color: red; pointer-events: none; animation: ${d} linear 1s infinite; }`,`#${x}:hover + #${g} { animation-duration: 0.4s; }`,`#${x} > button { background-color: #ffc24c; color: black; font-size: 16px; font-weight: 700; height: 35px; padding: 0px 20px; border-radius: 26px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; text-decoration-line: none; }`,`#${x} > button:hover { box-shadow: 3px 3px 10px 0 rgba(0, 0, 0, 0.9); }`,`.${_} { font-size: 14px; border-radius: ${L}; border: ${a}; box-shadow: ${n}; background-color: ${o}; color: ${i}; padding: 0; user-select: none; }`,`.${_} > form > header { margin: 24px; font-size: 16px; letter-spacing: 0.1px; }`,`.${_} > form > section { margin: 24px; color: var(--yt-spec-text-secondary, #aaa); letter-spacing: 0.2px; }`,`.${_} > form > footer { display: flex; justify-content: flex-end; padding: 10px 24px; border-top: ${a}; }`,`.${_} > form > footer > button { display: flex; align-items: center; justify-content: center; background-color: transparent; padding: 0 14px; height: 36px; line-height: 36px; outline: none; border-color: transparent; border-style: solid; border-radius: 18px; font-family: inherit; font-size: inherit; font-weight: 500; cursor: pointer; }`,`.${_} > form > footer > button#cancel { color: var(--yt-spec-text-primary); }`,`.${_} > form > footer > button#cancel:hover { background-color: ${r}; }`,`.${_} > form > footer > button#cancel:focus:not(:hover) { border-color: var(--yt-spec-text-primary); }`,`.${_} > form > footer > button#submit { color: var(--yt-spec-call-to-action, #3ea6ff); }`,`.${_} > form > footer > button#submit:hover { background-color: var(--yt-spec-suggested-action, #263850); }`,`.${_} > form > footer > button#submit:focus:not(:hover) { border-color: var(--yt-spec-call-to-action, #3ea6ff); }`,`.${_}::backdrop { background: rgba(0, 0, 0, 0.3); opacity 0.3; transition: opacity 0.2s; }`,`#${kn.i}:not([open]) { display: none; }`,`#${Yn.i}:not([open]) { display: none; }`,`#${Yn.i} > form > section { display: flex; justify-content: space-between; }`,`#${Yn.i} > form > section > label { display: flex; align-items: center; cursor: pointer; }`,`#${Yn.i} > form > section > label > input { margin: 0 7px 0 0; cursor: pointer; }`,`@keyframes ${N}-fade-out { from { opacity: 1; } to { opacity: 0; } }`,`#${N} { min-width: 200px; border-radius: ${L}; border: ${a}; padding: 12px; box-shadow: ${n}; background-color: ${o}; color: ${i}; position: fixed; top: 60px; left: 50vw; transform: translateX(-50%); font-size: 16px; z-index: 10000; }`,`#${N} > header { display: flex; align-items: center; padding-bottom: 8px; }`,`#${N} > header > #${C} { --yt-icon-button-icon-width: ${e}; --yt-icon-button-icon-height: ${e}; width: ${u}px; height: ${u}px; margin-left: 20px; }`,`#${N} > header > #${C}:hover { background-color: ${r}; border-radius: 50%; }`,`#${N} > div { padding: 8px 0; background-color: limegreen; color: #fff; text-align: center; }`,`#${yn} { padding: 0 20px 15px; opacity: 0.9; font-size: 16px; position: fixed; z-index: 2029; box-shadow: ${n}; background-color: ${o}; color: ${i}; text-align: center; border-radius: ${L}; border: ${a}; }`,`#${yn}[position=center] { bottom: 130px; left: 50vw; transform: translateX(-50%); }`,`#${yn}[position=left] { bottom: 130px; left: 50px; }`,`#${yn}[position=custom] { left: clamp(0px, var(--x), calc(100vw - var(--right-offset))); top: clamp(1px, var(--y), calc(100vh - var(--bottom-offset))); }`,`#${yn} > #drag-handle { visibility: hidden; position: relative; cursor: move; margin: 0 auto; padding: 4px 0; width: 50%; }`,`#${yn} > #drag-handle > hr { border-style: inset; border-width: 1px; }`,`#${yn} > #drag-handle > hr:first-child { margin: 0; }`,`#${yn} > #drag-handle > hr:last-child { margin: 3px 0 0; }`,`#${yn}[position=custom] > #drag-handle { visibility: visible; }`,`#${yn} > #content > header { display: flex; align-items: center; }`,`#${yn} > #content > header > #title { padding-left: 10px; padding-right: 5px; }`,`#${yn} > #content > header > #${bn} { margin-left: auto; }`,`#${yn} > #content > #choice { display: flex; align-items: center; margin: 10px 0; }`,`#${yn} > #content > #choice > input { margin: 0 0 0 30px; cursor: pointer; }`,`#${yn} > #content > #choice > input:first-of-type { margin-left: 0; }`,`#${yn} > #content > #choice > label { padding-left: 10px; cursor: pointer; }`,`#${yn} > #content > section { display: flex; align-items: center; }`,`#${yn} > #content > section > input { margin-right: 10px; width: 15em; border-radius: 6px; font-family: Courier; font-size: inherit; background-color: inherit; color: inherit; }`,`#${yn} > #content > section > #done { margin-left: auto; }`,`#${yn} > #content > footer { margin-top: 15px; }`,`#${yn} > #content > footer > div { display: flex; align-items: center; }`,`#${yn} > #content > footer > div > input { cursor: pointer; transform: scale(1.5); }`,`#${yn} > #content > footer > div > label { cursor: pointer; padding-left: 10px; }`,`#${yn} > #content yt-icon-button { --yt-icon-button-icon-width: ${e}; --yt-icon-button-icon-height: ${e}; width: ${u}px; height: ${u}px; }`,`#${yn} > #content yt-icon-button:hover { background-color: ${r}; border-radius: 50%; }`,`#${s} { display: none; position: fixed; padding: 0 20px 15px; border-radius: ${L}; border: ${a}; box-shadow: ${n}; background-color: ${o}; color: ${i}; opacity: 0.9; font-size: 16px; max-width: ${t}px; z-index: 2030; }`,`#${s}[position=center] { bottom: 30px; left: 50vw; transform: translateX(-50%); }`,`#${s}[position=left] { bottom: 30px; left: 50px; }`,`#${s}[position=custom] { left: clamp(0px, var(--x), calc(100vw - var(--right-offset))); top: clamp(1px, var(--y), calc(100vh - var(--bottom-offset))); }`,`#${s} > #drag-handle { visibility: hidden; position: relative; cursor: move; margin: 0 auto; padding: 4px 0; width: 50%; }`,`#${s} > #drag-handle > hr { border-style: inset; border-width: 1px; }`,`#${s} > #drag-handle > hr:first-child { margin: 0; }`,`#${s} > #drag-handle > hr:last-child { margin: 3px 0 0; }`,`#${s}[position=custom] > #drag-handle { visibility: visible; }`,`#${s} > #content { display: flex; align-items: center; column-gap: 10px; }`,`#${s} > #content > #selection { width: 100px; text-align: end; pointer-events: none; }`,`#${s} > #content > span { pointer-events: none; }`,`#${s} > #content > yt-icon-button { --yt-icon-button-icon-width: ${e}; --yt-icon-button-icon-height: ${e}; width: ${u}px; height: ${u}px; }`,`#${s} > #content > yt-icon-button:hover { background-color: ${r}; border-radius: 50%; }`,`#${s} > #content > yt-icon-button[disabled] { pointer-events: none; cursor: auto; color: var(--paper-icon-button-disabled-text, var(--disabled-text-color)); }`,`.${p}-bar-menu { position: relative; }`,`.${p}-bar-menu > #listbox { position: absolute; left: calc(100% - 50px); bottom: calc(100% + 42px); max-height: calc(100vh - 160px); overflow: auto; }`,`#${s}.right-side > .${p}-bar-menu > #listbox { left: auto; right: 0; }`,`#${s}.bottom-side > .${p}-bar-menu > #listbox { bottom: auto; }`,`.${p}-context-menu { position: absolute; z-index: 2030; transform: translateX(clamp(5vw, var(--x), calc(100vw - 100% - 40px))) translateY(clamp(5vh, var(--y), calc(100vh - 100% - 30px + var(--scroll-y)))); }`,`.${p}-context-menu > #listbox { max-height: calc(100vh - 100px); overflow: auto; }`,`#listbox.${k} { border-radius: ${L}; border: ${a}; padding: 8px 0px; white-space: nowrap; box-shadow: ${n}; background-color: ${o}; color: ${i}; }`,`.${E} > div { cursor: pointer; min-height: 36px; padding: 0 36px 0 16px; font-size: 14px; display: flex; align-items: center; }`,`.${E} > div:focus { background-color: ${r}; outline: 0; }`,`.${E} > div:hover { background-color: ${r}; }`,`.${E} > div:hover:focus { background-color: var(--${p}-spec-20-percent-layer); }`,`.${E} > div > yt-icon { pointer-events: none; margin-right: 16px; color: var(--yt-spec-icon-inactive); }`,`.${E}[separator="top"]::before, .${E}[separator="bottom"]::after { content: ""; display: block; height: 1px; background-color: ${r}; margin: 8px 0; }`,`@keyframes ${Tn.i} { from { opacity: 1; } to { opacity: 0; transform: scale(2); } }`,`#${Tn.i} { background: ${D}; animation: ${Tn.i} 0.5s linear forwards; position: fixed; left: 50%; top: 50%; width: ${f}px; height: ${f}px; margin-left: -${h}px; margin-top: -${h}px; border-radius: ${h}px; z-index: 2030; pointer-events: none; display: none; }`,`#${Tn.i} #icon { width: 40px; height: 40px; margin: 6px; display: flex; align-items: center; justify-content: center; }`,`${A} { --paper-checkbox-size: 40px; --paper-checkbox-ink-size: 40px; border-radius: ${L}; width: 100%; height: 100%; display: flex; align-items: end; justify-content: end; }`,`${A} > #checkboxContainer { border-bottom-right-radius: ${L}; }`,`${A} > #checkboxContainer > #checkbox { border-bottom-right-radius: ${L}; transition: none; }`,`${A} > #checkboxContainer > #checkbox > #checkmark { animation: checkmark-expand 40ms ease-out forwards; }`,`${A} > #checkboxLabel { display: none; }`,`${A}:not([checked]) > #checkboxContainer { display: none; }`,`${A}[checked] { background-color: rgba(62, 166, 255, 0.4); }`,`${A}:focus { outline: ${O} solid ${c}px; outline-offset: -${c}px }`,`${v} { border-radius: ${L}; position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: 2; cursor: pointer; display: none; }`,`ytd-grid-video-renderer[is-dismissed] > ${v}, ytd-video-renderer[is-hidden] > ${v}, ytd-video-renderer[is-dismissed] > ${v}, ytd-compact-video-renderer[is-dismissed] > ${v}, ytd-reel-item-renderer[is-dismissed] > ${v} { display: none; }`,`#${S} { position: fixed; top: 0; left: 100%; height: 100%; width: 10px; border-left: 2px solid ${O}; opacity: 0; z-index: 2; }`,`#${S}[dragging] { cursor: ew-resize; opacity: 1; }`,`#${S}:hover:not([dragging]) { cursor: ew-resize; opacity: 0.5; transition: opacity 0s 200ms; }`,`@keyframes ${S}-flash { 50% { opacity: 1; } }`,`@keyframes playlist-section-flash { 50% { background-color: ${O}; } }`,`#${y} { margin-right: 12px; width: 40px; height: 33px; }`,`#${y}:hover { border-radius: 50%; background-color: ${r}; }`,`#endpoint.yt-simple-endpoint.ytd-guide-entry-renderer.${m} { background-color: rgba(0, 255, 255, 0.5); border-radius: 10px; }`,`#endpoint.yt-simple-endpoint.ytd-guide-entry-renderer.${m}:hover { background-color: rgba(0, 255, 255, 0.3); border-radius: 10px; }`,`#endpoint.yt-simple-endpoint.ytd-guide-entry-renderer.${m}:focus { background-color: rgba(0, 255, 255, 0.5); border-radius: 10px; }`,".player-controls.ytd-reel-video-renderer { z-index: 3; }"],$=b.cssRules.length;l.forEach(((t,e)=>b.insertRule(t,$+e)))}}}(),Ot||(ro(n),Zn.V(),Ln.I(),t.addEventListener(f,ao,!0),e.addEventListener(at,uo),e.addEventListener(dt,fo),e.addEventListener(lt,yo),e.addEventListener(pt,bo),e.addEventListener(ut,ho),t.addEventListener(ot,Gt),t.addEventListener(Q,Qt),Ft=qt(),Wt()),En||Ne("#end.ytd-masthead").then((t=>{if(t){En=e.createElement("div"),En.id=$;const n=ke(ft.outlineIcon),o=ht.extensionName;En.innerHTML=Ht.createHTML(`<yt-icon-button id="button">${n}</yt-icon-button><tp-yt-paper-tooltip>${o}</tp-yt-paper-tooltip>`),En.firstElementChild.addEventListener(it,(t=>On()),!0),t.insertBefore(En,t.firstElementChild)}}))}()}(window,document);